<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Aritma Shop SMP</title>

<style>
body{
  margin:0;
  font-family:'Segoe UI',Arial,sans-serif;
  background:
    radial-gradient(circle at 20% 20%,#ffe259,transparent 60%),
    radial-gradient(circle at 80% 30%,#ffa751,transparent 60%),
    radial-gradient(circle at 50% 80%,#ffd194,transparent 60%),
    linear-gradient(135deg,#eef2f7,#cfd9df);
  min-height:100vh;
  overflow:hidden;
}

.container{
  width:560px;
  margin:40px auto;
  background:rgba(255,255,255,0.96);
  padding:25px;
  border-radius:20px;
  text-align:center;
  border:6px solid #ff9800;
  box-shadow:0 20px 40px rgba(0,0,0,0.35);
  position:relative;
  z-index:5;
}

h1{
  background:#ff9800;
  color:white;
  padding:15px;
  border-radius:15px;
  margin-top:0;
}

#soal{
  background:#fff3cd;
  border:2px dashed #ff9800;
  padding:15px;
  border-radius:12px;
  font-size:18px;
  font-weight:bold;
}

button{
  padding:12px 26px;
  margin:8px;
  font-size:16px;
  border:none;
  border-radius:12px;
  cursor:pointer;
  background:#4caf50;
  color:white;
  transition:.2s;
}

button:hover{transform:scale(1.07)}

#pilihan button{background:#2196f3}

#info{
  font-size:20px;
  font-weight:bold;
  margin:10px;
}

.hidden{display:none}

/* kembang api */
.spark{
  position:fixed;
  width:8px;
  height:8px;
  border-radius:50%;
  pointer-events:none;
  animation:fly 1.2s ease-out forwards;
}

@keyframes fly{
  from{transform:translate(0,0) scale(1);opacity:1}
  to{transform:translate(var(--x),var(--y)) scale(0);opacity:0}
}
</style>
</head>

<body>

<div class="container">
<h1>üõí ARITMA SHOP SMP</h1>

<div id="menu">
  <p>Belajar Aritmatika Sosial Super Seru üéÆ</p>
  <button onclick="mulai()">üßæ Buka Toko</button>
</div>

<div id="game" class="hidden">
  <p id="soal"></p>
  <div id="pilihan"></div>
  <p id="info"></p>
  <p>Soal <span id="no"></span> / 5</p>
  <p>üí∞ Skor: <span id="skor">0</span></p>
</div>
</div>

<script>
// ===== SUARA =====
function kasir(teks){
  const u=new SpeechSynthesisUtterance(teks);
  u.lang="id-ID";
  speechSynthesis.speak(u);
}

// ===== MUSIK =====
const ctx=new (window.AudioContext||window.webkitAudioContext)();
function boom(freq,dur){
  const o=ctx.createOscillator();
  const g=ctx.createGain();
  o.type="sawtooth";
  o.frequency.value=freq;
  o.connect(g); g.connect(ctx.destination);
  o.start();
  g.gain.exponentialRampToValueAtTime(0.0001,ctx.currentTime+dur/1000);
  setTimeout(()=>o.stop(),dur);
}
function musikBenar(){ boom(400,200); boom(800,200); boom(1200,300); }
function musikSalah(){ boom(200,600); }

// ===== KEMBANG API =====
function pesta(){
  for(let i=0;i<70;i++){
    const s=document.createElement("div");
    s.className="spark";
    s.style.background=`hsl(${Math.random()*360},100%,60%)`;
    s.style.left=(window.innerWidth/2)+"px";
    s.style.top=(window.innerHeight/2)+"px";
    s.style.setProperty("--x",(Math.random()*600-300)+"px");
    s.style.setProperty("--y",(Math.random()*600-300)+"px");
    document.body.appendChild(s);
    setTimeout(()=>s.remove(),1200);
  }
}

// ===== SOAL =====
const soal=[
 ["Harga beli Rp100.000 dijual Rp120.000. Untungnya ‚Ä¶",20000,[20000,15000,25000]],
 ["Harga Rp200.000 diskon 10%. Bayar ‚Ä¶",180000,[170000,180000,190000]],
 ["Harga beli Rp150.000 dijual Rp135.000. Ruginya ‚Ä¶",15000,[10000,15000,20000]],
 ["Tabungan Rp1.000.000 bunga 5%. Bunga ‚Ä¶",50000,[40000,50000,60000]],
 ["Harga tas Rp400.000 diskon 25%. Bayar ‚Ä¶",300000,[280000,300000,320000]]
];

let i=0,skor=0;

// ===== FUNGSI ACAK =====
function acak(array){
  for(let i=array.length-1;i>0;i--){
    let j=Math.floor(Math.random()*(i+1));
    [array[i],array[j]]=[array[j],array[i]];
  }
  return array;
}

// ===== GAME =====
function mulai(){
  document.getElementById("menu").classList.add("hidden");
  document.getElementById("game").classList.remove("hidden");
  i=0; skor=0;
  document.getElementById("skor").innerHTML=skor;
  kasir("Selamat datang di aritma shop");
  tampil();
}

function tampil(){
  document.getElementById("soal").innerHTML=soal[i][0];
  document.getElementById("no").innerHTML=i+1;

  let pilihan = acak([...soal[i][2]]); // <-- INI KUNCI ACAK
  let html="";
  pilihan.forEach(j=>{
    html+=`<button onclick="jawab(${j})">Rp${j.toLocaleString()}</button>`;
  });
  document.getElementById("pilihan").innerHTML=html;
}

function jawab(j){
  if(j===soal[i][1]){
    skor+=10;
    document.getElementById("info").innerHTML="üéÜ BENAR!";
    kasir("Jawaban benar");
    musikBenar(); pesta();
  }else{
    document.getElementById("info").innerHTML="‚ùå SALAH!";
    kasir("Jawaban salah");
    musikSalah();
  }

  document.getElementById("skor").innerHTML=skor;
  i++;

  if(i<soal.length){
    setTimeout(()=>{document.getElementById("info").innerHTML="";tampil()},1400);
  }else{
    kasir("Toko tutup, hebat sekali");
    document.getElementById("game").innerHTML=
      `<h2>üéâ TOKO TUTUP</h2>
       <p>Skor akhir</p>
       <h1>${skor}</h1>
       <button onclick="location.reload()">üîÅ Main Lagi</button>`;
  }
}
</script>

</body>
</html>
